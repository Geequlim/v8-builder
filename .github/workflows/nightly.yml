name: Update Version Nightly
on:
  workflow_dispatch:
    inputs: {}
  schedule:
    - cron: '0 2 * * *' # Run at 2 AM UTC

env:
  REPOSITORY_TOKEN: ${{ secrets.REPOSITORY_TOKEN }}

jobs:
  nightly:
    permissions: write-all
    name: Update Version Nightly
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Check V8 version
      run: |
        cd $GITHUB_WORKSPACE
        yarn install
        node ./.github/workflows/version.js
    - name: Commit & Push changes
      uses: actions-js/push@master
      with:
        github_token: ${{ secrets.REPOSITORY_TOKEN }}
        branch: main
        message: Update v8 version
