name: Update Version Nightly
on:
  workflow_dispatch:
    inputs: {}
  schedule:
    - cron: '0 0 * * *' # Run at 0 AM UTC

env:
  REPOSITORY_TOKEN: ${{ secrets.REPOSITORY_TOKEN }}

jobs:
  nightly:
    permissions: write-all
    name: Update Version Nightly
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Check V8 version
      run: |
        cd $GITHUB_WORKSPACE
        yarn install
        node ./.github/workflows/version.js
    - name: Commit & Push changes
      uses: actions-x/commit@v6
      with:
        branch: main
        token: ${{ secrets.GITHUB_TOKEN }}
        message: Update V8 version
